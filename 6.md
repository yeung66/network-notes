# 6 链路层和局域网

## 差错检测和纠正技术

比特级差错检测和纠正：对比特损伤进行检测和纠正

使用差错检测和纠正比特EDC来增强数据D，对于收到的数据D\`检测有无差错

- 前向纠错：接收方检测和纠正差错的能力FEC

### 奇偶检验

使用单个奇偶检验位(parity bit)，在偶检验的方式下，所有位加上附加检验位1的个数为偶数

偶数个比特差错时无法检验

#### 二维奇偶检验

行与列均设置奇偶检验位，不仅可以检测比特差错，还可以纠正

### 检验和方法

数据作为一个d比特的整数序列处理，所有整数进位加起来，取反则为检验和

加法溢出则移到最低位

因特网检验和：d=16

接收方对接受的数据和检验和求和，检测结果是否为全1，不是则出错

### 循环冗余检测

Cyclic Redundancy Check, CRC编码，也称为多项式编码

可以检测联系的突发差错

#### 操作

1. 对于d比特的数据D，协商一个r+1位的比特模式，称为**生成多项式G**。
2. 发送数据D时，选择**r个附加比特R**，附加到D上，使该**d+r**比特模式模2算术（加法和减法没有进位借位）刚好**被G整除**
3. 检测过程：用G除接收到的比特，若有余数，则有差错
4. R的计算：$D*2^r\over G$的余数

## 多路访问链路和协议

- 点对点链路：由链路一端的单个发送方和链路另一端的单个接收方
- 广播链路：能够让多个发送和接收节点连接到相同的单一的共享的广播信道
- 多路访问问题：如何协调多个发送和接收节点对一个共享广播信道的访问
- 多路访问协议：规范在共享广播信道上的传输行为
- 多个节点可以传输帧，节点可能同时收到多个帧，导致传输的帧在所有的接收方处碰撞，没有一个节点可以获得有效的帧

### 协议

应具有特性

- 只有一个节点发送数据时，能有全部的吞吐量
- 多个节点发送数据时，能平等共享带宽
- 协议是分散的
- 协议是简单的

#### 信道划分协议

在共享信道之间划分广播信道带宽

##### 时分多路复用

- TDM，将时间划分为时间帧，每个时间帧划分为时隙slot

- 然后将时隙分配给不同的节点
- 每个节点只能在分配到的时隙内传输分组比特

缺陷

- 平均速率被限制，即使只有一个节点
- 总是在等待轮次

优点

- 具有公平性
- 消除碰撞

##### 频分多路复用

FDM，将信道划分为不同的频段，分配给节点

具有TDM的优点和缺点

##### 码分多址

Code Division Multiple Access, CDMA为每个节点分配一种编码方式，每个节点使用唯一的编码对发送的数据进行编码

不同的节点能够同时传输，接收方也能接受数据比特

#### 随机接入协议

节点以全部速率进行传输，碰撞时等待一个随机时延后重发帧，直到无碰撞

##### 时隙ALOHA

假设

- 将时间划分为时隙，每个时隙可传输1帧
- 节点只在时隙开始传输数据
- 节点是同步的，知道时隙开始
- 一个时隙内有碰撞，所有节点在时隙结束前均可检测到

步骤

1. 需要发送帧时，等待下一个时隙开始时发送
2. 发送时没有碰撞则成功传输
3. 若碰撞，在往后的每个时隙开始时以概率p重传直至成功传输

效率：长期运行成功时隙（刚好有一个节点传输）的份额，最大为0.37；推倒过程